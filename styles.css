/* ============================================================
   styles.css – Dark Mode · Mobile-First · Chibi Buddy
   ============================================================ */

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}

:root{
  --bg:#0a0a0a;--card:#141414;--surface:#1a1a1a;--input:#1f1f1f;
  --green:#22c55e;--green-d:#16a34a;--yellow:#eab308;--red:#ef4444;
  --text:#f0f0f0;--dim:#9ca3af;--muted:#6b7280;--border:#2a2a2a;
  --r:12px;--rs:8px;--nav-h:64px;
  --font:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
}

html{font-size:16px;-webkit-text-size-adjust:100%;}
body{
  font-family:var(--font);background:var(--bg);color:var(--text);
  min-height:100vh;min-height:100dvh;overflow-x:hidden;
  -webkit-tap-highlight-color:transparent;
  padding-bottom:calc(var(--nav-h)+16px);
}
h1,h2,h3{font-weight:700;}
h2{font-size:1.2rem;margin-bottom:10px;}
h3{font-size:0.95rem;color:var(--dim);margin-bottom:8px;}
code{background:var(--surface);padding:2px 6px;border-radius:4px;font-size:.85em;}

/* ---- Buttons ---- */
.btn{
  display:inline-flex;align-items:center;justify-content:center;
  padding:10px 18px;border:none;border-radius:var(--rs);font-size:.9rem;
  font-weight:600;cursor:pointer;transition:.2s;gap:6px;font-family:var(--font);color:var(--text);
}
.btn:active{transform:scale(.96);}
.btn-primary{background:var(--green);color:#000;}
.btn-primary:hover{background:var(--green-d);}
.btn-secondary{background:var(--surface);border:1px solid var(--border);}
.btn-danger{background:#7f1d1d;}
.btn-icon{background:var(--surface);width:40px;height:40px;padding:0;font-size:1.3rem;border-radius:50%;}
.btn-sm{padding:5px 12px;font-size:.78rem;border-radius:6px;}
.btn-rest{background:var(--surface);border:1px solid var(--border);width:100%;justify-content:center;}
.btn-rest.disabled{opacity:.4;cursor:default;}

.input{
  background:var(--input);border:1px solid var(--border);color:var(--text);
  padding:10px 14px;border-radius:var(--rs);font-size:.9rem;font-family:var(--font);
  outline:none;transition:border .2s;
}
.input:focus{border-color:var(--green);}
.input-sm{padding:6px 10px;font-size:.8rem;}

/* ---- Bottom Nav ---- */
.bottom-nav{
  position:fixed;bottom:0;left:0;right:0;height:var(--nav-h);
  background:var(--card);border-top:1px solid var(--border);
  display:flex;align-items:stretch;justify-content:space-around;z-index:100;
  padding-bottom:env(safe-area-inset-bottom,0);
}
.nav-btn{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;
  background:none;border:none;color:var(--muted);font-size:.68rem;font-weight:600;cursor:pointer;
  transition:color .2s;font-family:var(--font);
}
.nav-btn .nav-icon{font-size:1.35rem;}
.nav-btn.active{color:var(--green);}

/* ---- DAY NAVIGATOR (Slide) ---- */
.day-nav{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;gap:8px;}
.day-nav-center{text-align:center;flex:1;}
.day-label{font-size:1.5rem;font-weight:800;}
.day-subdate{font-size:.8rem;color:var(--dim);margin-top:2px;}
.day-arrow{font-size:1.6rem;font-weight:800;width:44px;height:44px;}

/* ---- TODAY VIEW ---- */
.today-view{padding:16px;max-width:600px;margin:0 auto;}
.today-score-row{text-align:center;margin-bottom:12px;}
.today-score{
  display:inline-block;background:var(--green);color:#000;font-weight:800;
  padding:5px 16px;border-radius:20px;font-size:1.05rem;
}

/* Avatar */
.avatar-section{text-align:center;margin-bottom:14px;}
.avatar-container{width:150px;height:190px;margin:0 auto;}
.buddy-svg{width:100%;height:100%;}
.mood-text{font-size:.85rem;margin-top:6px;color:var(--dim);}
.mood-great{color:var(--green);}
.mood-good{color:#86efac;}
.mood-caution{color:var(--yellow);}
.mood-warning{color:#fb923c;}
.mood-critical{color:var(--red);}
.mood-ok{color:var(--dim);}

/* Buddy Animations */
.anim-bounce .buddy-svg{animation:buddyBounce 2s ease-in-out infinite;}
@keyframes buddyBounce{0%,100%{transform:translateY(0);}50%{transform:translateY(-4px);}}

.body-pumped .buddy-svg{filter:drop-shadow(0 0 6px rgba(34,197,94,0.3));}
.spirit-peaceful .buddy-svg{filter:drop-shadow(0 0 8px rgba(34,197,94,0.2));}
.spirit-stressed .buddy-svg{animation:jitter .3s infinite;}
@keyframes jitter{0%,100%{transform:translateX(0);}25%{transform:translateX(-1px);}75%{transform:translateX(1px);}}

/* Need Bars */
.need-bars{display:flex;flex-direction:column;gap:10px;margin-bottom:14px;}
.need-bar-wrap{position:relative;}
.need-bar-label{display:flex;justify-content:space-between;font-size:.78rem;margin-bottom:3px;color:var(--dim);}
.need-val{font-weight:700;color:var(--text);}
.need-bar{height:7px;background:var(--surface);border-radius:4px;overflow:hidden;}
.need-bar-fill{height:100%;border-radius:4px;transition:width .6s ease;}
.bar-ok{background:var(--green);}
.bar-low{background:var(--yellow);}
.bar-neglected{background:var(--red);}
.need-status{font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;position:absolute;right:0;top:-2px;}
.st-low{color:var(--yellow);}
.st-neglected{color:var(--red);}

.rest-row{margin-bottom:16px;}

/* Habits */
.today-habits h2{margin-bottom:10px;}
.habit-row{
  display:flex;align-items:center;gap:12px;padding:13px 14px;margin-bottom:7px;
  background:var(--card);border-radius:var(--r);cursor:pointer;transition:.2s;
  border:1px solid transparent;user-select:none;-webkit-user-select:none;
}
.habit-row:active{transform:scale(.98);}
.habit-row.done{border-color:var(--green);background:rgba(34,197,94,.06);}
.habit-check{
  width:26px;height:26px;border-radius:7px;border:2px solid var(--border);
  display:flex;align-items:center;justify-content:center;font-size:.85rem;
  font-weight:700;color:var(--green);transition:.2s;flex-shrink:0;
}
.habit-row.done .habit-check{background:var(--green);color:#000;border-color:var(--green);}
.habit-info{flex:1;display:flex;flex-direction:column;gap:1px;}
.habit-name{font-weight:600;font-size:.9rem;}
.habit-cat{font-size:.65rem;text-transform:uppercase;font-weight:600;letter-spacing:.4px;}
.cat-body{color:#f87171;}
.cat-personal{color:#60a5fa;}
.cat-spiritual{color:#a78bfa;}
.habit-streak{font-size:.8rem;color:var(--yellow);font-weight:700;white-space:nowrap;}

/* Micro-animation when done */
.anim-done{animation:popIn .35s ease;}
@keyframes popIn{0%{transform:scale(1);}40%{transform:scale(1.04);}100%{transform:scale(1);}}

/* ---- JOURNAL ---- */
.journal-section{margin-top:20px;}
.journal-section h2{margin-bottom:12px;}
.journal-q{margin-bottom:14px;}
.journal-label{font-size:.82rem;color:var(--dim);display:block;margin-bottom:4px;}
.journal-input{
  width:100%;background:var(--input);border:1px solid var(--border);color:var(--text);
  padding:10px 12px;border-radius:var(--rs);font-size:.88rem;font-family:var(--font);
  resize:vertical;outline:none;transition:border .2s;line-height:1.4;
}
.journal-input:focus{border-color:var(--green);}

/* ---- MONTH VIEW ---- */
.month-view{padding:16px;max-width:900px;margin:0 auto;}
.month-hdr{display:flex;align-items:center;justify-content:center;gap:14px;margin-bottom:14px;}
.cal-scroll{overflow-x:auto;-webkit-overflow-scrolling:touch;border-radius:var(--r);border:1px solid var(--border);margin-bottom:20px;}
.cal-table{width:max-content;min-width:100%;border-collapse:collapse;}
.cal-table th,.cal-table td{padding:7px 5px;text-align:center;font-size:.76rem;white-space:nowrap;border-bottom:1px solid var(--border);}
.cal-table th{position:sticky;top:0;background:var(--card);color:var(--dim);font-weight:600;z-index:2;}
.sticky-col{position:sticky;left:0;z-index:3;background:var(--card);min-width:110px;text-align:left;padding-left:10px;}
.hname-cell{font-weight:600;font-size:.76rem;}
.today-col{background:rgba(34,197,94,.08);}
.ck-cell{cursor:pointer;padding:3px;}
.ck-cell:active{background:rgba(255,255,255,.05);}
.ck-box{
  width:24px;height:24px;border-radius:5px;border:2px solid var(--border);margin:0 auto;
  display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:700;
  color:var(--green);transition:.15s;
}
.ck-box.checked{background:var(--green);color:#000;border-color:var(--green);}
.missed .ck-box{border-color:#374151;}

.cat-dot{display:inline-block;width:7px;height:7px;border-radius:50%;margin-right:5px;flex-shrink:0;}
.cat-dot-body{background:#f87171;}
.cat-dot-personal{background:#60a5fa;}
.cat-dot-spiritual{background:#a78bfa;}
.sbadge{font-size:.65rem;margin-left:3px;}

.add-habit-sec{margin-bottom:20px;}
.add-form{display:flex;gap:6px;flex-wrap:wrap;}
.add-form .input{flex:1;min-width:100px;}

.manage-sec{margin-bottom:20px;}
.manage-row{display:flex;align-items:center;gap:8px;padding:7px 10px;background:var(--surface);border-radius:var(--rs);margin-bottom:5px;}
.mr-name{flex:1;font-size:.85rem;}

/* ---- INSIGHTS ---- */
.insights-view{padding:16px;max-width:600px;margin:0 auto;}
.ins-hdr{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;}
.monthly-pct{text-align:right;}
.pct-num{font-size:1.8rem;font-weight:800;color:var(--green);display:block;line-height:1;}
.pct-lbl{font-size:.65rem;color:var(--dim);text-transform:uppercase;letter-spacing:.5px;}
.chart-wrap{height:180px;background:var(--card);border-radius:var(--r);padding:14px;margin-bottom:20px;}
.week-ov{margin-bottom:20px;}
.week-stats{display:flex;flex-direction:column;gap:8px;}
.ws{display:flex;align-items:center;gap:8px;}
.ws-lbl{width:65px;font-size:.8rem;color:var(--dim);flex-shrink:0;}
.ws-bar{flex:1;height:7px;background:var(--surface);border-radius:4px;overflow:hidden;}
.ws-fill{height:100%;border-radius:4px;transition:width .5s;}
.cat-fill-body{background:#f87171;}
.cat-fill-personal{background:#60a5fa;}
.cat-fill-spiritual{background:#a78bfa;}
.ws-txt{font-size:.75rem;width:30px;text-align:right;color:var(--dim);}
.streaks-sec{margin-bottom:20px;}
.streak-row{display:flex;align-items:center;gap:8px;padding:9px 12px;background:var(--card);border-radius:var(--rs);margin-bottom:6px;}
.sk-name{flex:1;font-size:.85rem;}
.sk-val{font-weight:700;color:var(--yellow);font-size:.85rem;}
.needs-summary{margin-bottom:16px;}

/* ---- SETTINGS ---- */
.settings-view{padding:16px;max-width:600px;margin:0 auto;}
.setting-card{background:var(--card);border-radius:var(--r);padding:16px;margin-bottom:14px;display:flex;flex-direction:column;gap:10px;}
.dim{font-size:.8rem;color:var(--muted);}

/* Buddy Customization */
.buddy-preview{width:130px;height:170px;margin:0 auto 10px;}
.cust-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.cust-item{display:flex;flex-direction:column;gap:4px;}
.cust-label{font-size:.75rem;color:var(--dim);font-weight:600;}
.cat-change-row{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:6px 0;}
.cat-change-row span{font-size:.85rem;}

/* ---- TOAST ---- */
#toast{
  position:fixed;bottom:calc(var(--nav-h)+18px);left:50%;
  transform:translateX(-50%) translateY(16px);
  background:var(--card);color:var(--text);border:1px solid var(--green);
  padding:9px 22px;border-radius:28px;font-size:.85rem;
  opacity:0;transition:.3s;pointer-events:none;z-index:200;white-space:nowrap;
}
#toast.show{opacity:1;transform:translateX(-50%) translateY(0);}

/* ---- Responsive ---- */
@media(min-width:768px){
  .today-view,.insights-view,.settings-view{padding:28px 24px;}
  .avatar-container{width:170px;height:210px;}
  .buddy-preview{width:150px;height:190px;}
}
@media(display-mode:standalone){body{padding-top:env(safe-area-inset-top,0);}}

/* ---- Animations ---- */
@keyframes fadeIn{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}
.today-view,.month-view,.insights-view,.settings-view{animation:fadeIn .25s ease;}

::-webkit-scrollbar{width:5px;height:5px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px;}

/* ============================================================
   BUDDY AVATAR – Layer Visibility & State System
   ============================================================ */

/* Container */
.avatar-container,.buddy-preview{
  display:flex;align-items:center;justify-content:center;overflow:visible;
}
.buddy-wrap{display:block;width:100%;height:100%;}
.buddy-svg{width:100%;height:100%;overflow:visible;}

/* ---- Hidden by default (shown only in certain states) ---- */
.layer-hood,
.layer-hood-front,
.layer-arms-fit,
.layer-arms-neglected,
.layer-arms-prayer,
.layer-arms-laptop,
.layer-arms-phone,
.layer-item-wristband,
.layer-item-headband,
.layer-item-watch,
.layer-item-chain,
.layer-item-headphones,
.layer-beard,
.layer-glasses,
.layer-eyebags,
.layer-fog,
.eyes-happy,
.eyes-tired,
.eyes-stressed,
.eyes-blink,
.brows-worried,
.brows-focused,
.mouth-smile-big,
.mouth-smile-warm,
.mouth-sad,
.mouth-stressed,
.aura-peaceful,
.aura-stressed,
.aura-react-body,
.aura-react-personal,
.effect-sparkles-fit,
.effect-sparkles-personal,
.effect-sparkles-spiritual,
.effect-sweat,
.effect-dark-particles,
.outfit-fit-stripes,
.shoes-fit-accent,
.outfit-business { display:none; }

/* Hair — only active style rendered */
.hair-messy,.hair-curly,.hair-cap { display:none; }
.hair-short { display:block; }

/* ---- Hair Styles ---- */
.buddy-hair-messy .hair-short  { display:none; }
.buddy-hair-messy .hair-messy  { display:block; }
.buddy-hair-curly .hair-short  { display:none; }
.buddy-hair-curly .hair-curly  { display:block; }
.buddy-hair-cap   .hair-short  { display:none; }
.buddy-hair-cap   .hair-cap    { display:block; }
.buddy-hair-cap   .layer-cap   { display:block; }
.buddy-hair-short .layer-cap   { display:none; }
.buddy-hair-messy .layer-cap   { display:none; }
.buddy-hair-curly .layer-cap   { display:none; }

/* ---- Skin Tone Custom Props ---- */
.buddy-skin-light  .buddy-svg{--sk:#FDDBB4;--ss:#F0BC80;}
.buddy-skin-medium .buddy-svg{--sk:#E8A96A;--ss:#C88040;}
.buddy-skin-tan    .buddy-svg{--sk:#C9884A;--ss:#A06530;}
.buddy-skin-brown  .buddy-svg{--sk:#8B5E3C;--ss:#6A3E20;}
.buddy-skin-dark   .buddy-svg{--sk:#5C3320;--ss:#3E2010;}

/* ---- Accessory Layers ---- */
.buddy-has-glasses        .layer-glasses           { display:block; }
.buddy-has-watch          .layer-item-watch        { display:block; }
.buddy-has-chain          .layer-item-chain        { display:block; }
.buddy-has-headphones     .layer-item-headphones   { display:block; }
.buddy-has-beard          .layer-beard             { display:block; }

/* ============================================================
   STATE: neutral (default)  → default arms, neutral mouth
   ============================================================ */
.state-neutral .layer-arms-default { display:block; }
.state-neutral .mouth-neutral      { display:block; }

/* ============================================================
   STATE: body-fit
   ============================================================ */
.state-body-fit .layer-arms-default  { display:none; }
.state-body-fit .layer-arms-fit      { display:block; }
.state-body-fit .layer-item-wristband{ display:block; }
.state-body-fit .layer-item-headband { display:block; }
.state-body-fit .outfit-fit-stripes  { display:block; }
.state-body-fit .shoes-fit-accent    { display:block; }
.state-body-fit .eyes-happy          { display:block; }
.state-body-fit .eyes-default        { display:none; }
.state-body-fit .mouth-neutral       { display:none; }
.state-body-fit .mouth-smile-big     { display:block; }
.state-body-fit .effect-sparkles-fit { display:block; }
.state-body-fit .buddy-svg           { filter:drop-shadow(0 0 10px rgba(34,197,94,.35)); }

/* ============================================================
   STATE: body-soft
   ============================================================ */
.state-body-soft .layer-arms-default { display:block; }
.state-body-soft .eyes-tired         { display:block; }
.state-body-soft .eyes-default       { display:none; }
.state-body-soft .mouth-neutral      { display:block; }

/* ============================================================
   STATE: body-neglected
   ============================================================ */
.state-body-neglected .layer-arms-default   { display:none; }
.state-body-neglected .layer-arms-neglected { display:block; }
.state-body-neglected .layer-hood           { display:block; }
.state-body-neglected .layer-hood-front     { display:block; }
.state-body-neglected .eyes-tired           { display:block; }
.state-body-neglected .eyes-default         { display:none; }
.state-body-neglected .mouth-neutral        { display:none; }
.state-body-neglected .mouth-sad            { display:block; }
.state-body-neglected .effect-sweat         { display:block; }
.state-body-neglected .buddy-svg            { filter:brightness(.88) saturate(.6); }
.state-body-neglected .buddy-breathe        { animation:jitter .5s infinite; }

/* ============================================================
   STATE: spiritual-peaceful
   ============================================================ */
.state-spiritual-peaceful .layer-arms-default { display:none; }
.state-spiritual-peaceful .layer-arms-prayer  { display:block; }
.state-spiritual-peaceful .aura-peaceful       { display:block; }
.state-spiritual-peaceful .eyes-happy          { display:block; }
.state-spiritual-peaceful .eyes-default        { display:none; }
.state-spiritual-peaceful .mouth-neutral       { display:none; }
.state-spiritual-peaceful .mouth-smile-warm    { display:block; }
.state-spiritual-peaceful .effect-sparkles-spiritual { display:block; }
.state-spiritual-peaceful .buddy-svg           { filter:drop-shadow(0 0 12px rgba(251,191,36,.3)); }

/* ============================================================
   STATE: spiritual-sad
   ============================================================ */
.state-spiritual-sad .layer-arms-default { display:block; }
.state-spiritual-sad .mouth-neutral      { display:none; }
.state-spiritual-sad .mouth-sad          { display:block; }
.state-spiritual-sad .buddy-svg          { filter:brightness(.85) saturate(.5); }

/* ============================================================
   STATE: spiritual-stressed
   ============================================================ */
.state-spiritual-stressed .layer-arms-default    { display:block; }
.state-spiritual-stressed .brows-worried          { display:block; }
.state-spiritual-stressed .brows-default          { display:none; }
.state-spiritual-stressed .eyes-stressed          { display:block; }
.state-spiritual-stressed .eyes-default           { display:none; }
.state-spiritual-stressed .mouth-neutral          { display:none; }
.state-spiritual-stressed .mouth-stressed         { display:block; }
.state-spiritual-stressed .aura-stressed           { display:block; }
.state-spiritual-stressed .effect-dark-particles  { display:block; }
.state-spiritual-stressed .buddy-svg              { filter:brightness(.82) saturate(.5); }
.state-spiritual-stressed .buddy-breathe          { animation:jitter .25s infinite; }

/* ============================================================
   STATE: personal-focused
   ============================================================ */
.state-personal-focused .layer-arms-default     { display:none; }
.state-personal-focused .layer-arms-laptop      { display:block; }
.state-personal-focused .layer-glasses          { display:block; }
.state-personal-focused .brows-focused          { display:block; }
.state-personal-focused .brows-default          { display:none; }
.state-personal-focused .eyes-default           { display:none; }
.state-personal-focused .eyes-happy             { display:block; }
.state-personal-focused .mouth-neutral          { display:none; }
.state-personal-focused .mouth-smile-big        { display:block; }
.state-personal-focused .effect-sparkles-personal{ display:block; }
.state-personal-focused .outfit-business        { display:none; } /* keep hoodie */
.state-personal-focused .buddy-svg              { filter:drop-shadow(0 0 8px rgba(96,165,250,.25)); }

/* ============================================================
   STATE: personal-foggy
   ============================================================ */
.state-personal-foggy .layer-arms-default { display:block; }
.state-personal-foggy .eyes-tired         { display:block; }
.state-personal-foggy .eyes-default       { display:none; }
.state-personal-foggy .layer-eyebags      { display:block; }
.state-personal-foggy .layer-fog          { display:block; }
.state-personal-foggy .mouth-neutral      { display:block; }
.state-personal-foggy .buddy-svg          { filter:brightness(.9) saturate(.6); }

/* ============================================================
   STATE: personal-avoiding
   ============================================================ */
.state-personal-avoiding .layer-arms-default { display:none; }
.state-personal-avoiding .layer-arms-phone   { display:block; }
.state-personal-avoiding .layer-eyebags      { display:block; }
.state-personal-avoiding .eyes-tired         { display:block; }
.state-personal-avoiding .eyes-default       { display:none; }
.state-personal-avoiding .mouth-neutral      { display:none; }
.state-personal-avoiding .mouth-sad          { display:block; }
.state-personal-avoiding .aura-stressed       { display:block; }
.state-personal-avoiding .buddy-svg          { filter:brightness(.84) saturate(.5); }

/* ============================================================
   IDLE ANIMATIONS
   ============================================================ */
.buddy-breathe {
  animation: buddyBreathe 4s ease-in-out infinite;
  transform-origin: 100px 200px;
}
@keyframes buddyBreathe {
  0%,100% { transform: scaleY(1)   scaleX(1); }
  50%      { transform: scaleY(1.015) scaleX(.995); }
}

/* Random blink (trigger via JS interval) */
.do-blink .eyes-blink  { display:block !important; }
.do-blink .eyes-default,
.do-blink .eyes-happy,
.do-blink .eyes-tired,
.do-blink .eyes-stressed { display:none !important; }

/* Float/hover loop */
.avatar-container .buddy-wrap {
  animation: buddyFloat 6s ease-in-out infinite;
}
@keyframes buddyFloat {
  0%,100% { transform: translateY(0); }
  50%      { transform: translateY(-5px); }
}

/* ============================================================
   MICRO-REACTION ANIMATIONS
   ============================================================ */
@keyframes reactionPop {
  0%   { transform: scale(1) rotate(0deg); }
  20%  { transform: scale(1.06) rotate(-2deg); }
  50%  { transform: scale(1.04) rotate(2deg); }
  100% { transform: scale(1) rotate(0deg); }
}
@keyframes reactionGlow {
  0%,100% { filter: brightness(1); }
  50%     { filter: brightness(1.2) drop-shadow(0 0 14px rgba(34,197,94,.5)); }
}

.react-body     .buddy-breathe { animation: reactionPop .6s ease, buddyFloat 6s ease-in-out 0.6s infinite; }
.react-personal .buddy-breathe { animation: reactionGlow .8s ease, buddyFloat 6s ease-in-out 0.8s infinite; }
.react-spiritual .buddy-breathe{ animation: reactionPop .5s ease, reactionGlow .8s ease, buddyFloat 6s ease-in-out 0.8s infinite; }

.react-body      .aura-react-body     { display:block !important; }
.react-personal  .aura-react-personal { display:block !important; }
.react-spiritual .aura-peaceful       { display:block !important; }

/* ============================================================
   STICKMAN AVATAR (stable override)
   ============================================================ */
.stickman-svg .shadow{fill:rgba(0,0,0,.18);}
.stickman-svg .head{fill:#e8a96a;stroke:#111827;stroke-width:2.4;}
.stickman-svg .stickman-hair,
.stickman-svg .eyes,
.stickman-svg .mouth,
.stickman-svg .torso,
.stickman-svg .arms,
.stickman-svg .legs,
.stickman-svg .shoes,
.stickman-svg .item,
.stickman-svg .beard,
.stickman-svg .fx{
  fill:none;stroke:#111827;stroke-linecap:round;stroke-linejoin:round;stroke-width:4;
}
.stickman-svg .eyes,.stickman-svg .mouth{stroke-width:3;}
.stickman-svg .fx{stroke-width:2;opacity:.9;}

/* skin tones */
.skin-light .stickman-svg .head{fill:#fddbb4;}
.skin-medium .stickman-svg .head{fill:#e8a96a;}
.skin-tan .stickman-svg .head{fill:#c9884a;}
.skin-brown .stickman-svg .head{fill:#8b5e3c;}
.skin-dark .stickman-svg .head{fill:#5c3320;}

/* hide variants by default */
.stickman-svg .hair-messy,.stickman-svg .hair-curly,.stickman-svg .hair-cap,
.stickman-svg .outfit-sport,.stickman-svg .outfit-business,
.stickman-svg .arms-fit,.stickman-svg .arms-prayer,.stickman-svg .arms-laptop,.stickman-svg .arms-phone,.stickman-svg .arms-pocket,
.stickman-svg .eyes-happy,.stickman-svg .eyes-tired,.stickman-svg .eyes-stressed,.stickman-svg .eyes-blink,
.stickman-svg .mouth-smile,.stickman-svg .mouth-sad,.stickman-svg .mouth-tight,
.stickman-svg .glasses,.stickman-svg .headphones,.stickman-svg .chain,.stickman-svg .watch,
.stickman-svg .beard,
.stickman-svg .fx{display:none;}

/* selected customization */
.hair-short .stickman-svg .hair-short{display:block;}
.hair-messy .stickman-svg .hair-short{display:none;}
.hair-messy .stickman-svg .hair-messy{display:block;}
.hair-curly .stickman-svg .hair-short{display:none;}
.hair-curly .stickman-svg .hair-curly{display:block;}
.hair-cap .stickman-svg .hair-short{display:none;}
.hair-cap .stickman-svg .hair-cap{display:block;}

.outfit-casual .stickman-svg .outfit-casual{display:block;}
.outfit-sport .stickman-svg .outfit-casual{display:none;}
.outfit-sport .stickman-svg .outfit-sport{display:block;stroke:#22c55e;}
.outfit-business .stickman-svg .outfit-casual{display:none;}
.outfit-business .stickman-svg .outfit-business{display:block;stroke:#60a5fa;}

.item-glasses .stickman-svg .glasses{display:block;stroke-width:2.2;}
.item-headphones .stickman-svg .headphones{display:block;stroke-width:2.5;}
.item-chain .stickman-svg .chain{display:block;stroke:#fbbf24;stroke-width:2.6;}
.item-watch .stickman-svg .watch{display:block;stroke:#22c55e;stroke-width:2.2;}
.beard-on .stickman-svg .beard{display:block;stroke-width:2.6;}

/* state overlays */
.state-neutral .stickman-svg .arms-default{display:block;}
.state-neutral .stickman-svg .eyes-default{display:block;}
.state-neutral .stickman-svg .mouth-neutral{display:block;}

.state-body-fit .stickman-svg .arms-default{display:none;}
.state-body-fit .stickman-svg .arms-fit{display:block;}
.state-body-fit .stickman-svg .eyes-default{display:none;}
.state-body-fit .stickman-svg .eyes-happy{display:block;}
.state-body-fit .stickman-svg .mouth-neutral{display:none;}
.state-body-fit .stickman-svg .mouth-smile{display:block;}
.state-body-fit .stickman-svg .fx-body{display:block;stroke:#22c55e;}

.state-body-soft .stickman-svg .arms-default{display:block;}
.state-body-soft .stickman-svg .eyes-default{display:none;}
.state-body-soft .stickman-svg .eyes-tired{display:block;}

.state-body-neglected .stickman-svg .arms-default{display:none;}
.state-body-neglected .stickman-svg .arms-pocket{display:block;}
.state-body-neglected .stickman-svg .eyes-default{display:none;}
.state-body-neglected .stickman-svg .eyes-tired{display:block;}
.state-body-neglected .stickman-svg .mouth-neutral{display:none;}
.state-body-neglected .stickman-svg .mouth-sad{display:block;}

.state-spiritual-peaceful .stickman-svg .arms-default{display:none;}
.state-spiritual-peaceful .stickman-svg .arms-prayer{display:block;}
.state-spiritual-peaceful .stickman-svg .eyes-default{display:none;}
.state-spiritual-peaceful .stickman-svg .eyes-happy{display:block;}
.state-spiritual-peaceful .stickman-svg .mouth-neutral{display:none;}
.state-spiritual-peaceful .stickman-svg .mouth-smile{display:block;}
.state-spiritual-peaceful .stickman-svg .fx-spiritual{display:block;stroke:#fbbf24;}

.state-spiritual-sad .stickman-svg .mouth-neutral{display:none;}
.state-spiritual-sad .stickman-svg .mouth-sad{display:block;}

.state-spiritual-stressed .stickman-svg .eyes-default{display:none;}
.state-spiritual-stressed .stickman-svg .eyes-stressed{display:block;}
.state-spiritual-stressed .stickman-svg .mouth-neutral{display:none;}
.state-spiritual-stressed .stickman-svg .mouth-tight{display:block;}
.state-spiritual-stressed .stickman-svg .fx-stress{display:block;stroke:#6b7280;}

.state-personal-focused .stickman-svg .arms-default{display:none;}
.state-personal-focused .stickman-svg .arms-laptop{display:block;}
.state-personal-focused .stickman-svg .eyes-default{display:none;}
.state-personal-focused .stickman-svg .eyes-happy{display:block;}
.state-personal-focused .stickman-svg .mouth-neutral{display:none;}
.state-personal-focused .stickman-svg .mouth-smile{display:block;}
.state-personal-focused .stickman-svg .fx-personal{display:block;stroke:#60a5fa;}

.state-personal-foggy .stickman-svg .eyes-default{display:none;}
.state-personal-foggy .stickman-svg .eyes-tired{display:block;}

.state-personal-avoiding .stickman-svg .arms-default{display:none;}
.state-personal-avoiding .stickman-svg .arms-phone{display:block;}
.state-personal-avoiding .stickman-svg .eyes-default{display:none;}
.state-personal-avoiding .stickman-svg .eyes-tired{display:block;}
.state-personal-avoiding .stickman-svg .mouth-neutral{display:none;}
.state-personal-avoiding .stickman-svg .mouth-sad{display:block;}
.state-personal-avoiding .stickman-svg .fx-stress{display:block;stroke:#6b7280;}

/* blink */
.do-blink .stickman-svg .eyes-default,
.do-blink .stickman-svg .eyes-happy,
.do-blink .stickman-svg .eyes-tired,
.do-blink .stickman-svg .eyes-stressed{display:none !important;}
.do-blink .stickman-svg .eyes-blink{display:block !important;}

/* idle motion */
.stickman-svg .buddy-breathe{transform-origin:110px 170px;animation:stickBreathe 3.8s ease-in-out infinite;}
.stickman-svg .buddy-bounce{transform-origin:110px 180px;animation:stickFloat 3.6s ease-in-out infinite;}
@keyframes stickBreathe{0%,100%{transform:scale(1);}50%{transform:scale(1.018,.992);}}
@keyframes stickFloat{0%,100%{transform:translateY(0);}50%{transform:translateY(-3px);}}

/* reactions */
.react-body .stickman-svg{animation:reactPulse .6s ease;filter:drop-shadow(0 0 8px rgba(34,197,94,.4));}
.react-personal .stickman-svg{animation:reactPulse .6s ease;filter:drop-shadow(0 0 8px rgba(96,165,250,.4));}
.react-spiritual .stickman-svg{animation:reactPulse .6s ease;filter:drop-shadow(0 0 8px rgba(251,191,36,.45));}
@keyframes reactPulse{0%{transform:scale(1);}40%{transform:scale(1.04);}100%{transform:scale(1);}}

/* ============================================================
   SIMPLE NEON STICKMAN OVERRIDE
   ============================================================ */
.avatar-container,.buddy-preview{display:flex;align-items:center;justify-content:center;}
.avatar-container{width:170px;height:210px;margin:0 auto;}
.buddy-preview{width:150px;height:190px;margin:0 auto 10px;}

.simple-stickman{
  --sm-neon:#22c55e;
  --sm-stroke:6px;
}
.simple-stickman .sm-shadow{fill:rgba(0,0,0,.18);}
.simple-stickman .sm-body,
.simple-stickman .sm-body *{
  stroke:var(--sm-neon);
  stroke-width:var(--sm-stroke);
  stroke-linecap:round;
  stroke-linejoin:round;
  fill:none;
}
.simple-stickman .sm-head{filter:drop-shadow(0 0 6px color-mix(in srgb, var(--sm-neon) 55%, transparent));}
.simple-stickman .sm-aura{display:none;opacity:.45;}
.simple-stickman .sm-stage-extra{display:none;}
.sm-stage-1 .simple-stickman .sm-stage-1{display:block;}
.sm-stage-2 .simple-stickman .sm-stage-1,
.sm-stage-2 .simple-stickman .sm-stage-2{display:block;}
.sm-stage-3 .simple-stickman .sm-stage-1,
.sm-stage-3 .simple-stickman .sm-stage-2,
.sm-stage-3 .simple-stickman .sm-stage-3{display:block;}
.sm-stage-3 .simple-stickman .sm-stage-3-mark{display:block;}
.sm-stage-4 .simple-stickman .sm-aura{display:block;}
.sm-stage-4 .simple-stickman .sm-stage-3-mark,
.sm-stage-4 .simple-stickman .sm-stage-4-mark{display:block;}

.simple-stickman .sm-face-low,
.simple-stickman .sm-face-active,
.simple-stickman .sm-reaction,
.simple-stickman .sm-reaction-spiritual,
.simple-stickman .sm-reaction-personal{display:none;}

.sm-state-neutral .simple-stickman .sm-face-neutral{display:block;}
.sm-state-low .simple-stickman .sm-face-neutral{display:none;}
.sm-state-low .simple-stickman .sm-face-low{display:block;}
.sm-state-down .simple-stickman .sm-face-neutral{display:none;}
.sm-state-down .simple-stickman .sm-face-low{display:block;}
.sm-state-down .simple-stickman .sm-arm-left{transform:translate(-2px,8px);}
.sm-state-down .simple-stickman .sm-arm-right{transform:translate(2px,8px);}
.sm-state-active .simple-stickman .sm-face-neutral{display:none;}
.sm-state-active .simple-stickman .sm-face-active{display:block;}
.sm-state-active .simple-stickman .sm-arm-left{transform:translate(-2px,-8px);}
.sm-state-active .simple-stickman .sm-arm-right{transform:translate(2px,-8px);}

.do-blink .simple-stickman .sm-face-neutral circle,
.do-blink .simple-stickman .sm-face-active path:nth-child(-n+2),
.do-blink .simple-stickman .sm-face-low line:nth-child(-n+2){opacity:0;}

.simple-stickman .buddy-breathe{transform-origin:110px 145px;animation:smBreathe 3.7s ease-in-out infinite;}
.simple-stickman .buddy-bounce{transform-origin:110px 165px;animation:smFloat 3.9s ease-in-out infinite;}
@keyframes smBreathe{0%,100%{transform:scale(1);}50%{transform:scale(1.018,.992);}}
@keyframes smFloat{0%,100%{transform:translateY(0);}50%{transform:translateY(-3px);}}

.react-body .simple-stickman .sm-reaction-body{display:block;stroke:#22c55e;}
.react-personal .simple-stickman .sm-reaction-personal{display:block;stroke:#60a5fa;}
.react-spiritual .simple-stickman .sm-reaction-spiritual{display:block;stroke:#fbbf24;}
.react-body .simple-stickman,
.react-personal .simple-stickman,
.react-spiritual .simple-stickman{animation:smReact .6s ease;}
@keyframes smReact{0%{transform:scale(1);}40%{transform:scale(1.05);}100%{transform:scale(1);}}

/* settings neon + evolution */
.input-color{height:44px;padding:6px;}
.evo-box{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:10px;}
.evo-row{display:flex;justify-content:space-between;font-size:.82rem;margin-bottom:4px;color:var(--dim);}
.evo-row strong{color:var(--text);}
.evo-bar{height:8px;background:rgba(255,255,255,.06);border-radius:999px;overflow:hidden;margin-top:4px;}
.evo-fill{height:100%;background:linear-gradient(90deg,var(--green),#60a5fa);border-radius:999px;}

